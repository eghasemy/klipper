Starting Klippy...
Args: ['./klippy/klippy.py', 'test/klippy/pressure_advance.cfg', '-i', './_test_.gcode', '-o', '_test_output', '-v', '-d', './atmega2560.dict', '-l', '_test_.log']
Git version: '1df8ced'
Branch: copilot/fix-6
Remote: origin
Tracked URL: https://github.com/eghasemy/klipper
CPU: 4 core AMD EPYC 7763 64-Core Processor
Python: '3.12.3 (main, Jun 18 2025, 17:59:45) [GCC 13.3.0]'
Building C code module c_helper.so
Start printer at Tue Jul 22 12:21:36 2025 (1753186896.8 160.6)
===== Config file =====
[stepper_x]
step_pin = PF0
dir_pin = PF1
enable_pin = !PD7
microsteps = 16
rotation_distance = 40
endstop_pin = ^PE5
position_endstop = 0
position_max = 200
homing_speed = 50

[stepper_y]
step_pin = PF6
dir_pin = !PF7
enable_pin = !PF2
microsteps = 16
rotation_distance = 40
endstop_pin = ^PJ1
position_endstop = 0
position_max = 200
homing_speed = 50

[stepper_z]
step_pin = PL3
dir_pin = PL1
enable_pin = !PK0
microsteps = 16
rotation_distance = 8
endstop_pin = ^PD3
position_endstop = 0.5
position_max = 200

[extruder]
step_pin = PA4
dir_pin = PA6
enable_pin = !PA2
microsteps = 16
rotation_distance = 33.5
nozzle_diameter = 0.500
filament_diameter = 3.500
heater_pin = PB4
sensor_type = EPCOS 100K B57560G104F
sensor_pin = PK5
control = pid
pid_kp = 22.2
pid_ki = 1.08
pid_kd = 114
min_temp = 0
max_temp = 210

[extruder_stepper my_extra_stepper]
extruder = extruder
step_pin = PH5
dir_pin = PH6
enable_pin = !PB5
microsteps = 16
rotation_distance = 28.2

[mcu]
serial = /dev/ttyACM0

[printer]
kinematics = cartesian
max_velocity = 300
max_accel = 3000
max_z_velocity = 5
max_z_accel = 100
=======================
Extruder max_extrude_ratio=0.103938
Unhandled exception during connect
Traceback (most recent call last):
  File "/home/runner/work/klipper/klipper/./klippy/klippy.py", line 131, in _connect
    self.send_event("klippy:mcu_identify")
  File "/home/runner/work/klipper/klipper/./klippy/klippy.py", line 223, in send_event
    return [cb(*params) for cb in self.event_handlers.get(event, [])]
            ^^^^^^^^^^^
  File "/home/runner/work/klipper/klipper/klippy/mcu.py", line 787, in _mcu_identify
    self._connect_file()
  File "/home/runner/work/klipper/klipper/klippy/mcu.py", line 676, in _connect_file
    dfile = open(dict_fname, 'rb')
            ^^^^^^^^^^^^^^^^^^^^^^
FileNotFoundError: [Errno 2] No such file or directory: './atmega2560.dict'
Unfreezing garbage collection
Starting Klippy...
Args: ['./klippy/klippy.py', 'test/klippy/pressure_advance.cfg', '-i', './_test_.gcode', '-o', '_test_output', '-v', '-d', './atmega2560.dict', '-l', '_test_.log']
Git version: '1df8ced'
Branch: copilot/fix-6
Remote: origin
Tracked URL: https://github.com/eghasemy/klipper
CPU: 4 core AMD EPYC 7763 64-Core Processor
Python: '3.12.3 (main, Jun 18 2025, 17:59:45) [GCC 13.3.0]'
Start printer at Tue Jul 22 12:22:56 2025 (1753186976.9 240.7)
===== Config file =====
[stepper_x]
step_pin = PF0
dir_pin = PF1
enable_pin = !PD7
microsteps = 16
rotation_distance = 40
endstop_pin = ^PE5
position_endstop = 0
position_max = 200
homing_speed = 50

[stepper_y]
step_pin = PF6
dir_pin = !PF7
enable_pin = !PF2
microsteps = 16
rotation_distance = 40
endstop_pin = ^PJ1
position_endstop = 0
position_max = 200
homing_speed = 50

[stepper_z]
step_pin = PL3
dir_pin = PL1
enable_pin = !PK0
microsteps = 16
rotation_distance = 8
endstop_pin = ^PD3
position_endstop = 0.5
position_max = 200

[extruder]
step_pin = PA4
dir_pin = PA6
enable_pin = !PA2
microsteps = 16
rotation_distance = 33.5
nozzle_diameter = 0.500
filament_diameter = 3.500
heater_pin = PB4
sensor_type = EPCOS 100K B57560G104F
sensor_pin = PK5
control = pid
pid_kp = 22.2
pid_ki = 1.08
pid_kd = 114
min_temp = 0
max_temp = 210

[extruder_stepper my_extra_stepper]
extruder = extruder
step_pin = PH5
dir_pin = PH6
enable_pin = !PB5
microsteps = 16
rotation_distance = 28.2

[mcu]
serial = /dev/ttyACM0

[printer]
kinematics = cartesian
max_velocity = 300
max_accel = 3000
max_z_velocity = 5
max_z_accel = 100
=======================
Extruder max_extrude_ratio=0.103938
Loaded MCU 'mcu' 138 commands (1df8ced / gcc: (Ubuntu 13.3.0-6ubuntu2~24.04) 13.3.0 binutils: (GNU Binutils for Ubuntu) 2.42)
MCU 'mcu' config: ADC_MAX=4095 CLOCK_FREQ=50000000 MCU=linux PCA9685_MAX=4096 PWM_MAX=32768 STATS_SUMSQ_BASE=256 STEPPER_STEP_BOTH_EDGE=1
Sending MCU 'mcu' printer configuration...
Config error
Traceback (most recent call last):
  File "/home/runner/work/klipper/klipper/klippy/mcu.py", line 712, in _send_config
    self._serial.send(c)
  File "/home/runner/work/klipper/klipper/klippy/serialhdl.py", line 257, in send
    cmd = self.msgparser.create_command(msg)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/klipper/klipper/klippy/msgproto.py", line 349, in create_command
    cmd = mp.encode_by_name(**argparts)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/klipper/klipper/klippy/msgproto.py", line 179, in encode_by_name
    t.encode(out, params[name])
  File "/home/runner/work/klipper/klipper/klippy/msgproto.py", line 108, in encode
    raise enumeration_error(self.enum_name, v)
msgproto.enumeration_error: Unknown value 'PH5' in enumeration 'pin'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/runner/work/klipper/klipper/./klippy/klippy.py", line 135, in _connect
    cb()
  File "/home/runner/work/klipper/klipper/klippy/mcu.py", line 758, in _connect
    self._send_config(None)
  File "/home/runner/work/klipper/klipper/klippy/mcu.py", line 723, in _send_config
    raise self._printer.config_error(
configparser.Error: Pin 'PH5' is not a valid pin name on mcu 'mcu'
Unfreezing garbage collection
